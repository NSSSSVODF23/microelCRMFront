"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[31],{8031:(it,d,r)=>{r.r(d),r.d(d,{InstallersModule:()=>rt});var p=r(9808),c=r(3470),u=r(7384),g=r(383),t=r(5e3),x=r(8738),C=r(8007),T=r(6891),m=r(845),f=r(6198);function R(e,o){1&e&&t.GkF(0)}function Z(e,o){if(1&e&&(t.ynx(0),t.YNc(1,R,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(11);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function y(e,o){1&e&&t.GkF(0)}function U(e,o){if(1&e&&(t.ynx(0),t.YNc(1,y,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function I(e,o){1&e&&t.GkF(0)}function A(e,o){if(1&e&&(t.ynx(0),t.YNc(1,I,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function w(e,o){1&e&&t.GkF(0)}function O(e,o){if(1&e&&(t.ynx(0),t.YNc(1,w,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(15);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}const F=function(e){return["/writing-report",e]};function k(e,o){if(1&e&&(t.TgZ(0,"div",11),t._UZ(1,"app-task-list-element",12),t.TgZ(2,"div",13),t._UZ(3,"p-button",14),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("item",n.task),t.xp6(2),t.Q6J("routerLink",t.VKq(2,F,n.workLogId))}}function P(e,o){if(1&e&&(t.TgZ(0,"div",9),t.YNc(1,k,4,4,"div",10),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.uncompletedReports)}}function J(e,o){1&e&&(t.TgZ(0,"div",15),t._UZ(1,"p-progressSpinner"),t.qZA())}function L(e,o){1&e&&(t.TgZ(0,"div",16),t._UZ(1,"span",17),t.TgZ(2,"span"),t._uU(3,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"),t.qZA()())}function Y(e,o){1&e&&(t.TgZ(0,"div",18),t._UZ(1,"span",19),t.TgZ(2,"span"),t._uU(3,"\u041d\u0435\u0442 \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u043e\u0442\u0447\u0435\u0442\u043e\u0432"),t.qZA()())}let E=(()=>{class e{constructor(n,i){this.api=n,this.rt=i,this.uncompletedReports=[],this.loadingState=u.Gu.LOADING,this.subscriptions=new g.xf}getUncompletedReports(){this.api.getUncompletedReports().subscribe({next:n=>{this.uncompletedReports=n,this.loadingState=n.length>0?u.Gu.READY:u.Gu.EMPTY},error:()=>this.loadingState=u.Gu.ERROR})}ngOnInit(){this.loadingState=u.Gu.LOADING,this.subscriptions.addSubscription("updList",this.rt.workLogUpdated().subscribe(()=>this.getUncompletedReports())),this.getUncompletedReports()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.s),t.Y36(C.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:16,vars:5,consts:[[1,"flex","flex-column","px-5","pb-5","gap-4"],[1,"text-bluegray-500","text-4xl","font-medium"],[3,"ngSwitch"],[4,"ngSwitchCase"],["listTemp",""],["loadingTemp",""],["errorTemp",""],["emptyTemp",""],[4,"ngTemplateOutlet"],[1,"flex","flex-column","px-4"],["class","flex gap-3 split-line align-items-center",4,"ngFor","ngForOf"],[1,"flex","gap-3","split-line","align-items-center"],[3,"item"],[1,"flex-grow-1"],["label","\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442","styleClass","white-space-nowrap",3,"routerLink"],[1,"flex","align-items-center","justify-content-center","h-30rem"],[1,"flex","flex-column","align-items-center","justify-content-center","h-30rem","text-red-400","text-2xl","font-bold"],[1,"mds-error"],[1,"flex","flex-column","flex-grow-1","w-full","align-items-center","justify-content-center","p-5","text-bluegray-400","text-2xl","font-bold"],[1,"mds-summarize"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"\u041e\u0442\u0447\u0435\u0442\u044b \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c"),t.qZA(),t.ynx(3,2),t.YNc(4,Z,2,1,"ng-container",3),t.YNc(5,U,2,1,"ng-container",3),t.YNc(6,A,2,1,"ng-container",3),t.YNc(7,O,2,1,"ng-container",3),t.BQk(),t.qZA(),t.YNc(8,P,2,1,"ng-template",null,4,t.W1O),t.YNc(10,J,2,0,"ng-template",null,5,t.W1O),t.YNc(12,L,4,0,"ng-template",null,6,t.W1O),t.YNc(14,Y,4,0,"ng-template",null,7,t.W1O)),2&n&&(t.xp6(3),t.Q6J("ngSwitch",i.loadingState),t.xp6(1),t.Q6J("ngSwitchCase","LOADING"),t.xp6(1),t.Q6J("ngSwitchCase","READY"),t.xp6(1),t.Q6J("ngSwitchCase","ERROR"),t.xp6(1),t.Q6J("ngSwitchCase","EMPTY"))},dependencies:[p.sg,p.tP,p.RF,p.n9,T.E,m.zx,c.rH,f.G]}),e})();var M=r(9706);const N=function(){return["/"]};let Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:6,vars:4,consts:[[1,"top-panel"],[1,"responsive-wrapper","top-panel-content"],["alt","","src","assets/logo-dark.svg",1,"cursor-pointer",3,"routerLink"],[1,"stretched"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2)(3,"div",3)(4,"app-account-panel"),t.qZA()(),t._UZ(5,"router-outlet")),2&n&&(t.xp6(2),t.Udp("height","3rem"),t.Q6J("routerLink",t.DdM(3,N)))},dependencies:[c.lC,c.rH,M.J],styles:[".top-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:var(--bgc-000);border-bottom:1px solid var(--bgc-300);box-shadow:var(--shadow-0);position:sticky;margin-bottom:1.5rem;top:0;height:var(--top-panel-height);z-index:1009}.top-panel-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1.5rem 1.5rem 1.5rem 2rem}"]}),e})();var _=r(5107),b=r(9300),G=r(3900),D=r(8505),s=r(2382),S=r(1514),W=r(3868),v=r(3407);function B(e,o){1&e&&t.GkF(0)}function j(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.text," ")}}function z(e,o){if(1&e){const n=t.EpF();t.ynx(0,6),t.TgZ(1,"div",7)(2,"p-button",8),t.NdJ("onClick",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.nav.backOrDefault(["/"]))}),t.qZA(),t.TgZ(3,"span",9),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"date"),t.qZA()(),t._UZ(7,"app-task-fields-table-view",10),t.TgZ(8,"div",11),t.YNc(9,j,2,1,"div",12),t.qZA(),t.TgZ(10,"div",13),t._UZ(11,"textarea",14),t.TgZ(12,"p-button",15),t.NdJ("onClick",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.saveReport())}),t.qZA()(),t.BQk()}if(2&e){const n=o.ngIf,i=t.oxw(2);t.Q6J("formGroup",i.reportForm),t.xp6(4),t.hij("\u041e\u0442\u0447\u0435\u0442 ",t.lcZ(5,7,t.xi3(6,9,n.created,"EEEE, dd MMMM yyyy")),""),t.xp6(3),t.Q6J("task",n.task),t.xp6(2),t.Q6J("ngForOf",n.chat.messages),t.xp6(2),t.Q6J("autoResize",!0)("rows",5),t.xp6(1),t.Q6J("disabled",i.reportForm.invalid)}}function K(e,o){if(1&e&&(t.YNc(0,z,13,12,"ng-container",5),t.ALo(1,"async")),2&e){const n=t.oxw(),i=t.MAs(5);t.Q6J("ngIf",t.lcZ(1,2,n.workLog$))("ngIfElse",i)}}function H(e,o){1&e&&(t.TgZ(0,"div",16),t._UZ(1,"p-progressSpinner"),t.qZA())}const $=function(){return["/uncompleted-reports"]};function X(e,o){if(1&e&&(t.TgZ(0,"div",17),t._UZ(1,"span",18),t.TgZ(2,"span"),t._uU(3),t.qZA(),t._UZ(4,"p-button",19),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.error),t.xp6(1),t.Q6J("routerLink",t.DdM(2,$))}}let V=(()=>{class e{constructor(n,i,l){this.api=n,this.route=i,this.nav=l,this.reportForm=new s.cw({workLogId:new s.NI(null,[s.kI.required]),reportDescription:new s.NI("",[s.kI.required])}),this.reportSaving=!1,this.error="",this.workLog$=this.route.params.pipe((0,b.h)(a=>!!a.workLogId),(0,G.w)(a=>this.api.getWorkLog(a.workLogId)),(0,D.b)({next:a=>{this.reportForm.setValue({workLogId:a.workLogId,reportDescription:""})},error:a=>{this.error=a.error.message}}))}ngOnInit(){}saveReport(){this.reportSaving=!0,this.api.saveReport(this.reportForm.value).subscribe({next:()=>{this.reportSaving=!1,this.nav.backOrDefault(["/"])},error:n=>{this.reportSaving=!1}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.s),t.Y36(c.gz),t.Y36(S.r))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[[1,"flex","flex-column","px-5","py-3","gap-3"],[4,"ngIf","ngIfThen","ngIfElse"],["mainTemp",""],["loadingTemp",""],["errorTemp",""],[3,"formGroup",4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"flex","gap-3","align-items-center"],["icon","mdi-arrow_back","styleClass","p-button-icon p-button-text p-button-secondary",3,"onClick"],[1,"text-bluegray-500","text-4xl","font-medium"],[3,"task"],[1,"flex","flex-column"],[4,"ngFor","ngForOf"],[1,"flex","flex-column","gap-3","px-3"],["pInputTextarea","","placeholder","\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0442...","formControlName","reportDescription",3,"autoResize","rows"],["label","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",1,"align-self-end",3,"disabled","onClick"],[1,"flex","align-items-center","justify-content-center","h-30rem"],[1,"flex","flex-column","align-items-center","justify-content-center","h-30rem","text-red-400","text-2xl","font-bold"],[1,"mds-error"],["label","\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u043a \u0441\u043f\u0438\u0441\u043a\u0443","styleClass","p-button-outlined p-button-success",1,"pt-3",3,"routerLink"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,B,1,0,"ng-container",1),t.qZA(),t.YNc(2,K,2,4,"ng-template",null,2,t.W1O),t.YNc(4,H,2,0,"ng-template",null,3,t.W1O),t.YNc(6,X,5,3,"ng-template",null,4,t.W1O)),2&n){const l=t.MAs(3),a=t.MAs(7);t.xp6(1),t.Q6J("ngIf",i.error)("ngIfThen",a)("ngIfElse",l)}},dependencies:[p.sg,p.O5,W.C,m.zx,c.rH,v.g,f.G,s.Fj,s.JJ,s.JL,s.sg,s.u,p.Ov,p.rS,p.uU]}),e})();var q=r(4004),tt=r(8028);let h=(()=>{class e{constructor(n,i){this.personality=n,this.router=i,this.personality$=this.personality.userData.pipe((0,q.U)(l=>{var a;return null!==(a=l.offsite)&&void 0!==a&&a}))}canActivate(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}canActivateChild(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}canLoad(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(tt.F),t.LFG(c.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const et=[{path:"",component:Q,children:[{path:"",component:E},{path:"writing-report/:workLogId",component:V}],canActivate:[_.a,h],canActivateChild:[_.a,h]}];let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(et),c.Bz]}),e})();var ot=r(2333);let rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,ot.U,m.hJ,nt,v.A,f.L,s.UX]}),e})()}}]);