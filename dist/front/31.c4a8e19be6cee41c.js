"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[31],{8031:(ot,d,r)=>{r.r(d),r.d(d,{InstallersModule:()=>nt});var s=r(9808),l=r(3470),u=r(7384),g=r(383),t=r(5e3),x=r(8738),C=r(8007),T=r(4881),m=r(845),f=r(6198);function R(e,o){1&e&&t.GkF(0)}function Z(e,o){if(1&e&&(t.ynx(0),t.YNc(1,R,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(11);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function U(e,o){1&e&&t.GkF(0)}function I(e,o){if(1&e&&(t.ynx(0),t.YNc(1,U,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function A(e,o){1&e&&t.GkF(0)}function y(e,o){if(1&e&&(t.ynx(0),t.YNc(1,A,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function w(e,o){1&e&&t.GkF(0)}function O(e,o){if(1&e&&(t.ynx(0),t.YNc(1,w,1,0,"ng-container",8),t.BQk()),2&e){t.oxw();const n=t.MAs(15);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}const k=function(e){return["/writing-report",e]};function P(e,o){if(1&e&&(t.TgZ(0,"div",11),t._UZ(1,"app-task-list-element",12),t.TgZ(2,"div",13),t._UZ(3,"p-button",14),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("item",n.task),t.xp6(2),t.Q6J("routerLink",t.VKq(2,k,n.workLogId))}}function F(e,o){if(1&e&&(t.TgZ(0,"div",9),t.YNc(1,P,4,4,"div",10),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.uncompletedReports)}}function J(e,o){1&e&&(t.TgZ(0,"div",15),t._UZ(1,"p-progressSpinner"),t.qZA())}function Y(e,o){1&e&&(t.TgZ(0,"div",16),t._UZ(1,"span",17),t.TgZ(2,"span"),t._uU(3,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"),t.qZA()())}function b(e,o){1&e&&(t.TgZ(0,"div",18),t._UZ(1,"span",19),t.TgZ(2,"span"),t._uU(3,"\u041d\u0435\u0442 \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0445 \u043e\u0442\u0447\u0435\u0442\u043e\u0432"),t.qZA()())}let E=(()=>{class e{constructor(n,i){this.api=n,this.rt=i,this.uncompletedReports=[],this.loadingState=u.Gu.LOADING,this.subscriptions=new g.xf}getUncompletedReports(){this.api.getUncompletedReports().subscribe({next:n=>{this.uncompletedReports=n,this.loadingState=n.length>0?u.Gu.READY:u.Gu.EMPTY},error:()=>this.loadingState=u.Gu.ERROR})}ngOnInit(){this.loadingState=u.Gu.LOADING,this.subscriptions.addSubscription("updList",this.rt.workLogUpdated().subscribe(()=>this.getUncompletedReports())),this.getUncompletedReports()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.s),t.Y36(C.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:16,vars:5,consts:[[1,"flex","flex-column","px-5","pb-5","gap-4"],[1,"text-bluegray-500","text-4xl","font-medium"],[3,"ngSwitch"],[4,"ngSwitchCase"],["listTemp",""],["loadingTemp",""],["errorTemp",""],["emptyTemp",""],[4,"ngTemplateOutlet"],[1,"flex","flex-column","px-4"],["class","flex gap-3 split-line align-items-center",4,"ngFor","ngForOf"],[1,"flex","gap-3","split-line","align-items-center"],[3,"item"],[1,"flex-grow-1"],["label","\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442","styleClass","white-space-nowrap",3,"routerLink"],[1,"flex","align-items-center","justify-content-center","h-30rem"],[1,"flex","flex-column","align-items-center","justify-content-center","h-30rem","text-red-400","text-2xl","font-bold"],[1,"mds-error"],[1,"flex","flex-column","flex-grow-1","w-full","align-items-center","justify-content-center","p-5","text-bluegray-400","text-2xl","font-bold"],[1,"mds-summarize"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"\u041e\u0442\u0447\u0435\u0442\u044b \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c"),t.qZA(),t.ynx(3,2),t.YNc(4,Z,2,1,"ng-container",3),t.YNc(5,I,2,1,"ng-container",3),t.YNc(6,y,2,1,"ng-container",3),t.YNc(7,O,2,1,"ng-container",3),t.BQk(),t.qZA(),t.YNc(8,F,2,1,"ng-template",null,4,t.W1O),t.YNc(10,J,2,0,"ng-template",null,5,t.W1O),t.YNc(12,Y,4,0,"ng-template",null,6,t.W1O),t.YNc(14,b,4,0,"ng-template",null,7,t.W1O)),2&n&&(t.xp6(3),t.Q6J("ngSwitch",i.loadingState),t.xp6(1),t.Q6J("ngSwitchCase","LOADING"),t.xp6(1),t.Q6J("ngSwitchCase","READY"),t.xp6(1),t.Q6J("ngSwitchCase","ERROR"),t.xp6(1),t.Q6J("ngSwitchCase","EMPTY"))},dependencies:[s.sg,s.tP,s.RF,s.n9,T.E,m.zx,l.rH,f.G]}),e})();var L=r(9706);const M=function(){return["/"]};let N=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"top-panel"],[1,"responsive-wrapper","top-panel-content"],["href","/"],["alt","","src","assets/logo-dark.svg",1,"cursor-pointer",3,"routerLink"],[1,"stretched"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t._UZ(4,"div",4)(5,"app-account-panel"),t.qZA()(),t._UZ(6,"router-outlet")),2&n&&(t.xp6(3),t.Udp("height","3rem"),t.Q6J("routerLink",t.DdM(3,M)))},dependencies:[l.lC,l.rH,L.J],styles:[".top-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:var(--bgc-000);border-bottom:1px solid var(--bgc-300);box-shadow:var(--shadow-0);position:sticky;margin-bottom:1.5rem;top:0;height:var(--top-panel-height);z-index:1009}.top-panel-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1.5rem 1.5rem 1.5rem 2rem}"]}),e})();var _=r(5107),Q=r(9300),D=r(3900),G=r(8505),a=r(2382),S=r(1514),W=r(6759),h=r(3407);function B(e,o){1&e&&t.GkF(0)}function j(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.text," ")}}function z(e,o){if(1&e){const n=t.EpF();t.ynx(0,6),t.TgZ(1,"div",7)(2,"p-button",8),t.NdJ("onClick",function(){t.CHM(n);const c=t.oxw(2);return t.KtG(c.nav.backOrDefault(["/"]))}),t.qZA(),t.TgZ(3,"span",9),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"date"),t.qZA()(),t._UZ(7,"app-task-fields-table-view",10),t.TgZ(8,"div",11),t.YNc(9,j,2,1,"div",12),t.qZA(),t.TgZ(10,"div",13),t._UZ(11,"textarea",14),t.TgZ(12,"p-button",15),t.NdJ("onClick",function(){t.CHM(n);const c=t.oxw(2);return t.KtG(c.saveReport())}),t.qZA()(),t.BQk()}if(2&e){const n=o.ngIf,i=t.oxw(2);t.Q6J("formGroup",i.reportForm),t.xp6(4),t.hij("\u041e\u0442\u0447\u0435\u0442 ",t.lcZ(5,7,t.xi3(6,9,n.created,"EEEE, dd MMMM yyyy")),""),t.xp6(3),t.Q6J("task",n.task),t.xp6(2),t.Q6J("ngForOf",n.chat.messages),t.xp6(2),t.Q6J("autoResize",!0)("rows",5),t.xp6(1),t.Q6J("disabled",i.reportForm.invalid)}}function K(e,o){if(1&e&&(t.YNc(0,z,13,12,"ng-container",5),t.ALo(1,"async")),2&e){const n=t.oxw(),i=t.MAs(5);t.Q6J("ngIf",t.lcZ(1,2,n.workLog$))("ngIfElse",i)}}function H(e,o){1&e&&(t.TgZ(0,"div",16),t._UZ(1,"p-progressSpinner"),t.qZA())}const X=function(){return["/uncompleted-reports"]};function $(e,o){if(1&e&&(t.TgZ(0,"div",17),t._UZ(1,"span",18),t.TgZ(2,"span"),t._uU(3),t.qZA(),t._UZ(4,"p-button",19),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.error),t.xp6(1),t.Q6J("routerLink",t.DdM(2,X))}}let V=(()=>{class e{constructor(n,i,c){this.api=n,this.route=i,this.nav=c,this.reportForm=new a.cw({workLogId:new a.NI(null,[a.kI.required]),reportDescription:new a.NI("",[a.kI.required])}),this.reportSaving=!1,this.error="",this.workLog$=this.route.params.pipe((0,Q.h)(p=>!!p.workLogId),(0,D.w)(p=>this.api.getWorkLog(p.workLogId)),(0,G.b)({next:p=>{this.reportForm.setValue({workLogId:p.workLogId,reportDescription:""})},error:p=>{this.error=p.error.message}}))}ngOnInit(){}saveReport(){this.reportSaving=!0,this.api.saveReport(this.reportForm.value).subscribe({next:()=>{this.reportSaving=!1,this.nav.backOrDefault(["/"])},error:n=>{this.reportSaving=!1}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.s),t.Y36(l.gz),t.Y36(S.r))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[[1,"flex","flex-column","px-5","py-3","gap-3"],[4,"ngIf","ngIfThen","ngIfElse"],["mainTemp",""],["loadingTemp",""],["errorTemp",""],[3,"formGroup",4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"flex","gap-3","align-items-center"],["icon","mdi-arrow_back","styleClass","p-button-icon p-button-text p-button-secondary",3,"onClick"],[1,"text-bluegray-500","text-4xl","font-medium"],[3,"task"],[1,"flex","flex-column"],[4,"ngFor","ngForOf"],[1,"flex","flex-column","gap-3","px-3"],["pInputTextarea","","placeholder","\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0442...","formControlName","reportDescription",3,"autoResize","rows"],["label","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",1,"align-self-end",3,"disabled","onClick"],[1,"flex","align-items-center","justify-content-center","h-30rem"],[1,"flex","flex-column","align-items-center","justify-content-center","h-30rem","text-red-400","text-2xl","font-bold"],[1,"mds-error"],["label","\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u043a \u0441\u043f\u0438\u0441\u043a\u0443","styleClass","p-button-outlined p-button-success",1,"pt-3",3,"routerLink"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,B,1,0,"ng-container",1),t.qZA(),t.YNc(2,K,2,4,"ng-template",null,2,t.W1O),t.YNc(4,H,2,0,"ng-template",null,3,t.W1O),t.YNc(6,$,5,3,"ng-template",null,4,t.W1O)),2&n){const c=t.MAs(3),p=t.MAs(7);t.xp6(1),t.Q6J("ngIf",i.error)("ngIfThen",p)("ngIfElse",c)}},dependencies:[s.sg,s.O5,W.C,m.zx,l.rH,h.g,f.G,a.Fj,a.JJ,a.JL,a.sg,a.u,s.Ov,s.rS,s.uU]}),e})(),v=(()=>{class e{constructor(){}canActivate(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}canActivateChild(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}canLoad(n,i){return g.Ke.loadOrDefault("isOffsite",!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const q=[{path:"",component:N,children:[{path:"",component:E},{path:"writing-report/:workLogId",component:V}],canActivate:[_.a,v],canActivateChild:[_.a,v]}];let tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(q),l.Bz]}),e})();var et=r(8576);let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,et.U,m.hJ,tt,h.A,f.L,a.UX]}),e})()}}]);