<div class="menu-panel">
    <ng-container [ngSwitch]="category">
        <ng-container *ngSwitchCase="'main'">
            <ng-container *ngTemplateOutlet="main"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'tasks'">
            <ng-container *ngTemplateOutlet="tasks"></ng-container>
        </ng-container>
        <ng-container *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="main"></ng-container>
        </ng-container>
    </ng-container>
</div>

<ng-template #main>
    <app-extended-menu-item [link]="['/tasks','incoming']" caption="Задачи" icon="task"></app-extended-menu-item>
    <app-extended-menu-item caption="Абоненты" icon="group"></app-extended-menu-item>
    <app-extended-menu-item caption="Дома" icon="home_work"></app-extended-menu-item>
    <app-extended-menu-item caption="Коммутаторы" icon="dns"></app-extended-menu-item>
    <app-extended-menu-item caption="Склад" icon="warehouse"></app-extended-menu-item>
    <app-extended-menu-item [link]="['/employees']" caption="Сотрудники" icon="account_circle"></app-extended-menu-item>
</ng-template>

<ng-template #tasks>
    <ng-container *ngTemplateOutlet="backButton; context:{name:'Задачи'}"></ng-container>
    <app-extended-menu-item [link]="['/tasks','incoming']" caption="Входящие" icon="inbox" [badge]="(incomingCount$ | async)??''"></app-extended-menu-item>
    <app-extended-menu-item [link]="['/tasks','calendar']" caption="Календарь" icon="calendar_month"></app-extended-menu-item>
    <app-extended-menu-item [link]="['/tasks','list']" caption="Список"
                            icon="format_list_bulleted"></app-extended-menu-item>
    <app-extended-menu-item [elements]="stagesMenuItems" [isExtended]="stageMenuExtended" caption="Доска"
                            icon="checklist"></app-extended-menu-item>
    <app-extended-menu-item [link]="['/tasks','templates']" caption="Теги/Шаблоны" icon="ballot"></app-extended-menu-item>
</ng-template>

<ng-template #backButton let-name="name">
    <div>
        <div [routerLink]="['/']" class="back-button">
            <span class="material-icons-round parent-inherit">navigate_before</span>
            <span>{{name}}</span>
        </div>
        <hr [style.margin]="'.7rem 1rem 1rem 1rem'" class="h-divider">
    </div>
</ng-template>
